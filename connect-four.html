<html>
 <head>
   <meta charset="utf-8">
   <title> Josh Aharonoff | Connect Four</title>
   <head profile="http://www.w3.org/2005/10/profile">
   <link rel="icon" 
      type="image/png" 
      href="img/favicon.ico">
   <link rel="stylesheet" href="css/normalize.css">
   <link href='http://fonts.googleapis.com/css family=Changa+One|Open+Sans:400italic,700italic,400,700,800' rel='stylesheet'>
   <link rel="stylesheet" href="css/main.css">
   <link rel="stylesheet" href="css/responsive.css">
   <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!--makes sures the desktop layout does not go on mobile devices.this sets the viewport attribute to the content attribute , which scales the window to the size of the device. We set the initial scale at 1.0 so that it shows properly -->
 </head>
   
    <header>
      <a href="/index" id="logo">
        <h1> Josh Aharonoff </h1>
        <h2> </h2>        
      </a>
      <nav>
        <ul>
          <li> <a href="portfolio"> Portfolio </a> </li>
          <li> <a href="about"> About </a> </li>
          <li> <a href="coderbyte.php"> Coderbyte </a> </li> 
          <li> <a href="contact"> Contact </a> </li>        
          <li> <a href=""> Blog </a> </li> 
        </ul> 
      </nav>
    </header>
   
    <body>
      
      <div class='connect-four' id = 'connect-four-board'>  
        <h3> Let's Play Some Connect Four!</h3>
        <div id = 'playColorMessage'>
<!--          <h4>Choose a color!</h4>-->
        </div>
        
      </div>
      <div>
        <input type= "button" value = "New Game" id = 'newGameButton'>
        
      </div>
   </body>
   
    <script type='text/javascript'>
        
  
      var NUM_ROWS = 6;
      var NUM_COLUMNS = 7;
      var numOfPlayers = 2;
      var movesArray = [];
      
      function createBoard(){
        
        var board;
        var rowElement;
        var circleElement;
        
        // 1. get the connect four board
        board = document.getElementById('connect-four-board');
        
        // 2. create a row
        for (var row = 1; row <=NUM_ROWS; ++row){
          rowElement = document.createElement ("div")
          rowElement.setAttribute("class", "connect-four-row")
          
        // 3. create a column
          for (var col = 1; col <=NUM_COLUMNS; ++col){
            circleElement = document.createElement("div")
            circleElement.setAttribute ("class", "connect-four-circle")
            circleElement.setAttribute ("id", "circle" + ((row - 1) *NUM_COLUMNS + col));
            
        // 4. set a click value, hover value, and off hover value    
            circleElement.onclick = playTurn; 
            onHoverValue(circleElement);
            offHoverValue(circleElement);
        
        // 5. add the cell to the current row            
            rowElement.appendChild(circleElement);            
          }  
          
        // 6. add the row to the connect for board
          board.appendChild(rowElement);
        } 
      }
      
      createBoard();
      
            
      
     function randomizeStartingTurn(turn1,turn2){
          if(Math.random() <.5){
            return turn1;
          } else {
            return turn2;
          }
      }
      

      
      function switchTurn (){        
        if(turn === "Blue"){
          turn = "Yellow"
        } else {
          turn = "Blue"
        }
        return turn;        
      }
      
      function playTurn(){
        var index = getCircleIndex(this);
        if(!movesArray[index]){
          movesArray[index] = turn;
          switchTurn();
          this.onmouseover = null;
          this.onmouseout = null;
        }
      }
      
      function getCircleIndex(circle){
        return parseInt(circle.id.replace('circle','') -1 )
      }
      
      function checkOpenCircle(index){
        if(movesArray[index+NUM_COLUMNS]){
          movesArray[index] = turn;
          return index;
        } else{
          return checkOpenCircle(index+NUM_ROWS)
        }
      }
      
      function updateView(){
        switchTurn();
//        setCurrentTurnMessage(color);
      }
      
      function onHoverValue(circle){
         circle.onmouseover = function(event){
          this.style.backgroundColor = turn;
        }     
      }
      
      function offHoverValue(circle){
        circle.onmouseout = function(event){
          this.style.backgroundColor = '';
        }
      }
      
      function newGame(){
//        setStartingMessage(color)
        createBoard()
      }
      
      var turn = randomizeStartingTurn("Blue","Yellow");
      var newGameButton = document.getElementById('newGameButton') ;
      newGameButton.onclick = newGame;
      
      
      
      
     
   </script>
    <footer>
        <a href="http://www.twitter.com/joshaharonoff"><img src="img/twitter-wrap.png" alt="Twitter Logo" class="social-icon"></a>
        <a href="http://www.facebook.com/joshaharonoff"><img src="img/facebook-wrap.png" alt="Facebook Logo" class="social-icon"></a>     
        <p> &copy; 2015 Josh Aharonoff.</p>
    </footer> 