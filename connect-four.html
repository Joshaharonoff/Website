<html>
 <head>
   <meta charset="utf-8">
   <title> Josh Aharonoff | Connect Four</title>
   <head profile="http://www.w3.org/2005/10/profile">
   <link rel="icon" 
      type="image/png" 
      href="img/favicon.ico">
   <link rel="stylesheet" href="css/normalize.css">
   <link href='http://fonts.googleapis.com/css family=Changa+One|Open+Sans:400italic,700italic,400,700,800' rel='stylesheet'>
   <link rel="stylesheet" href="css/main.css">
   <link rel="stylesheet" href="css/responsive.css">
   <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!--makes sures the desktop layout does not go on mobile devices.this sets the viewport attribute to the content attribute , which scales the window to the size of the device. We set the initial scale at 1.0 so that it shows properly -->
 </head>
   
    <header>
      <a href="/index" id="logo">
        <h1> Josh Aharonoff </h1>
        <h2> </h2>        
      </a>
      <nav>
        <ul>
          <li> <a href="portfolio"> Portfolio </a> </li>
          <li> <a href="about"> About </a> </li>
          <li> <a href="coderbyte.php"> Coderbyte </a> </li> 
          <li> <a href="contact"> Contact </a> </li>        
          <li> <a href=""> Blog </a> </li> 
        </ul> 
      </nav>
    </header>
   
    <body>
      
      <div class='connect-four' id = 'connect-four-board'>  
        <h3> Let's Play Some Connect Four!</h3>
        <div id = 'playColorMessage'>
          <h4>Choose a color!</h4>
        </div>
        
      </div>
      <div>
        <input type= "button" value = "New Game" id = 'newGameButton'>
        
      </div>
   </body>
   
    <script type='text/javascript'>
        
    (function (){   
      var NUM_ROWS = 6;
      var NUM_COLUMNS = 7;
      var numOfPlayers = 2;
      
     function randomizeStartingTurn(color1,color2){
          if(Math.random() <.5){
            return color1;
          } else {
            return color2;
          }
      }
      
      var color = randomizeStartingTurn("Blue","Yellow");
      var newGameButton = document.getElementById('newGameButton') ;
      newGameButton.onclick = newGame;
       
     
      
      (function createBoard(){
        
        var board;
        var rowElement;
        var circleElement;
        
        // 1. get the connect four board
        board = document.getElementById('connect-four-board');  
        // 2. create a row
        for (var row = 1; row <=NUM_ROWS; ++row){
          rowElement = document.createElement ("div")
          rowElement.setAttribute("class", "connect-four-row")
        // 3. create a column
          for (var col = 1; col <=NUM_COLUMNS; ++col){
            circleElement = document.createElement("div")
            circleElement.setAttribute ("class", "connect-four-circle")
            circleElement.setAttribute ("id", "circle" + ((row - 1) *NUM_COLUMNS + col));
            circleElement.onclick = playTurn;    
        // 4. add the cell to the current row            
            rowElement.appendChild(circleElement);            
          }  
        // 5. add the row to the connect for board
          board.appendChild(rowElement);
        }
        setCurrentTurnMessage(color + " will start")
      }());
      
      function setCurrentTurnMessage(message){
        document.getElementById('playColorMessage').innerHTML = message;
      }
      
      function switchColors (){        
        if(color === "Blue"){
           color = "Yellow"
        } else {
        color = "Blue"
        }
       
        return color;        
      }
      
      function playTurn(){      
        this.style.backgroundColor = color;
        updateView();
      } 
      
      function updateView(){
        switchColors();
        setCurrentTurnMessage(color + ", it's your turn!");
      }
      
      function newGame(){
        for(var i = 1; i<= NUM_ROWS*NUM_COLUMNS; ++i){
          document.getElementById("circle"+i).style.backgroundColor = '';
        }
      }
      }());//IIFE - immediately invoked function expression.
     
   </script>
    <footer>
        <a href="http://www.twitter.com/joshaharonoff"><img src="img/twitter-wrap.png" alt="Twitter Logo" class="social-icon"></a>
        <a href="http://www.facebook.com/joshaharonoff"><img src="img/facebook-wrap.png" alt="Facebook Logo" class="social-icon"></a>     
        <p> &copy; 2015 Josh Aharonoff.</p>
    </footer> 