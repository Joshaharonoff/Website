<!DOCTYPE html> 
<html>
 <head>
   <meta charset="utf-8">
   <title> Josh Aharonoff | Tic Tac Toe</title>
   <head profile="http://www.w3.org/2005/10/profile">
   <link rel="icon" 
      type="image/png" 
      href="img/favicon.ico">
   <link rel="stylesheet" href="css/normalize.css">
   <link href='http://fonts.googleapis.com/css family=Changa+One|Open+Sans:400italic,700italic,400,700,800' rel='stylesheet'>
   <link rel="stylesheet" href="css/main.css">
   <link rel="stylesheet" href="css/responsive.css">
   <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!--makes sures the desktop layout does not go on mobile devices.this sets the viewport attribute to the content attribute , which scales the window to the size of the device. We set the initial scale at 1.0 so that it shows properly -->
 </head>
 <header>
      <a href="/index" id="logo">
        <h1> Josh Aharonoff </h1>
        <h2> </h2>        
      </a>
      <nav>
        <ul>
          <li> <a href="portfolio"> Portfolio </a> </li>
          <li> <a href="about"> About </a> </li>
          <li> <a href="coderbyte.php"> Coderbyte </a> </li> 
          <li> <a href="contact"> Contact </a> </li>        
          <li> <a href=""> Blog </a> </li> 
        </ul> 
      </nav>
    </header>
      
 
     

<body onload = "play()">
 <div class="tic-tac-toe" >

  <h1>Let's Play Some Tic-Tac-Toe!</h1>
  <div id="message"> Who's turn is it?</div>


  <table id = 'table'>
      <tr>
       <td id = 'box1' onclick = 'nextMove(this)'></td>
       <td id = 'box2' onclick = 'nextMove(this)'></td>
       <td id = 'box3' onclick = 'nextMove(this)'></td>
      </tr>
      <tr>
       <td id = 'box4' onclick = 'nextMove(this)'></td>
       <td id = 'box5' onclick = 'nextMove(this)'></td>
       <td id = 'box6' onclick = 'nextMove(this)'></td>
      </tr>
      <tr>
       <td id = 'box7' onclick = 'nextMove(this)'></td>
       <td id = 'box8' onclick = 'nextMove(this)'></td>
       <td id = 'box9' onclick = 'nextMove(this)'></td>
      </tr>
  </table>  
  <input type= "button" value = "New Game" onclick= "resetGame()"> 

</div>





           <div class="fb-comments" data-href="INSERT LINK HERE" data-width="100%" data-numposts="10"></div>    
    <footer>
        <a href="http://www.twitter.com/joshaharonoff"><img src="img/twitter-wrap.png" alt="Twitter Logo" class="social-icon"></a>
        <a href="http://www.facebook.com/joshaharonoff"><img src="img/facebook-wrap.png" alt="Facebook Logo" class="social-icon"></a>     
        <p> &copy; 2015 Josh Aharonoff.</p>
    </footer> 
    <script type="text/javascript">
          
          var turn = '';
          var playerOne = "X";
          var playerTwo = "O";
          
          
          function play() {

            turn = playerOne;
            if (Math.random() < .5){
             turn = playerTwo;
            }            
            setMessage ( turn + ' will be starting')
          }

          function setMessage(msg){
            document.getElementById("message").innerHTML = msg
          }

          function nextMove(move){
             if(checkForWinner(turn)){
             } else if(move.innerHTML === ''){
              move.innerHTML = turn
              switchTurn();
            }            
          }

          function switchTurn(){
            if(checkForWinner(turn)){
                setMessage("Looks like " +turn + " wins!");                
            } else if(catsGame()){
              setMessage ("Cats Game!")
            } 
              else{ 
                if(turn === playerOne){
                    turn = playerTwo;}
                else{
                    turn = playerOne;
                }
               setMessage ('Hey '+ turn + ', it\'s your turn!');
            } 
          }

          function getBoxValue(number){
            return document.getElementById("box"+number).innerHTML;
          }

          function checkRow(a,b,c, value){
            var result = false;
            var winningColor = '#C1CFC1';
            var cells = [a,b,c];
            var checkCells = cells.every(function (cell){ return getBoxValue(cell)===value});  
            if(checkCells){
              result = true;
              for(var i=0;i<cells.length;i++){
              document.getElementById("box"+cells[i]).style.backgroundColor = winningColor; 
              }
            }
            return result
          }

          function checkForWinner(value){
            var result = false
            if(checkRow(1,2,3,value) ||
               checkRow(4,5,6,value) || 
               checkRow(7,8,9,value) ||
               checkRow(1,4,7,value) ||
               checkRow(2,5,8,value) ||
               checkRow(3,6,9,value) ||
               checkRow(1,5,9,value) ||
               checkRow(3,5,7,value)){
              result = true;
            }
            return result
          }

          function catsGame(){
            var newArray= [];
            for(var i=1;i<=9;i++){               
                  newArray.push(getBoxValue(i))
              }
            return newArray.every(function(cell){return cell !== ""});            
          }

          function resetGame(){
            for(var i=1;i<=9;i++){
             document.getElementById("box"+i).innerHTML = '';
             document.getElementById("box"+i).style.backgroundColor='';
             play()
            }
          }
          
      </script>    
  </body> 
</html>      